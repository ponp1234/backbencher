<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ site_name }} — Exam specific revision by trusted examiners</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
  <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container header-inner">
      <a class="brand" href="{{ url_for('home') }}" aria-label="{{ site_name }} home">
        <span>{{ site_name }}</span>
      </a>

      <!-- Primary nav with Courses dropdown -->
      <nav aria-label="Primary" class="primary-nav">
        <div class="menu-item">
          <a href="#" class="nav-link menu-trigger" id="coursesBtn" aria-expanded="false" aria-haspopup="true">
            Courses
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M6 9l6 6 6-6" stroke="#0f172a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
          <div class="dropdown" id="coursesMenu" role="menu" aria-label="Courses menu">
            <div class="dd-grid">
              <div class="dd-col">
                <h5>Primary</h5>
                <ul class="dd-list">
                  <li><a class="dd-link" href="{{ url_for('level', level_slug='primary') }}">Primary 3</a></li>
                  <li><a class="dd-link" href="{{ url_for('level', level_slug='primary') }}">Primary 4</a></li>
                  <li><a class="dd-link" href="{{ url_for('level', level_slug='primary') }}">Primary 5</a></li>
                </ul>
              </div>
              <div class="dd-col">
                <h5>Secondary</h5>
                <ul class="dd-list">
                  <li><a class="dd-link" href="{{ url_for('level', level_slug='secondary') }}">Sec 1 <span class="dd-badge">New</span></a></li>
                  <li><a class="dd-link" href="{{ url_for('level', level_slug='secondary') }}">Sec 2</a></li>
                  <li><a class="dd-link" href="{{ url_for('level', level_slug='secondary') }}">Sec 3</a></li>
                  <li><a class="dd-link" href="{{ url_for('level', level_slug='secondary') }}">Sec 4</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <a class="nav-link" href="#about">About</a>
      </nav>

      <div class="search" role="search">
        <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M21 21l-4.35-4.35M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z" stroke="#0f172a" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <input aria-label="Search subjects" type="search" placeholder="Search for a subject" />
      </div>

      <div class="actions">
        <a class="btn btn-outline" href="#login" id="openLogin">Log in</a>
        <a class="btn btn-primary" href="#join" id="openSignup">Join now for free</a>
      </div>

      <button class="menu-btn" id="menuBtn" aria-expanded="false" aria-controls="mobileMenu" aria-label="Open menu">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 6h16M4 12h16M4 18h16" stroke="#0f172a" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
    </div>

    <!-- Mobile menu (full-width overlay; no .container here) -->
    <div id="mobileMenu" class="mobile-menu" aria-label="Mobile navigation" hidden>
      <strong style="display:block;margin:8px 0">Courses by class</strong>
      <a href="{{ url_for('level', level_slug='primary') }}">Primary 3</a>
      <a href="{{ url_for('level', level_slug='primary') }}">Primary 4</a>
      <a href="{{ url_for('level', level_slug='primary') }}">Primary 5</a>
      <a href="{{ url_for('level', level_slug='secondary') }}">Sec 1</a>
      <a href="{{ url_for('level', level_slug='secondary') }}">Sec 2</a>
      <a href="{{ url_for('level', level_slug='secondary') }}">Sec 3</a>
      <a href="{{ url_for('level', level_slug='secondary') }}">Sec 4</a>
      <a href="{{ url_for('login') }}" id="mLogin">Log in</a>
    </div>
  </header>

  {% block content %}{% endblock %}

  <!-- Footer -->
  <footer class="mega-footer">
    <div class="container footer-top">
      <div class="footer-logo" aria-hidden="true">
        <span class="brand-bolt"></span>
      </div>
      <div class="footer-grid" aria-label="Site footer links">
        <div>
          <h4>Resources</h4>
          <ul>
            <li><a href="{{ url_for('home') }}">Home</a></li>
            <li><a href="#">Learning Hub</a></li>
            <li><a href="#">Teachers</a></li>
            <li><a href="#">Ambassadors</a></li>
            <li><a href="#">Scholarship</a></li>
            <li><a href="{{ url_for('register') }}" id="footerJoin">Join</a></li>
            <li><a href="#">Past Papers</a></li>
            <li><a href="#">Solution Banks</a></li>
            <li><a href="#">Sitemap</a></li>
          </ul>
        </div>
        <div>
          <h4>Singapore Levels</h4>
          <ul>
            <li><a href="{{ url_for('level', level_slug='primary') }}">PSLE (Primary 5–6)</a></li>
            <li><a href="{{ url_for('level', level_slug='secondary') }}">O-Level (Secondary)</a></li>
            <li><a href="#">A-Level (JC)</a></li>
            <li><a href="#">IP Programme</a></li>
            <li><a href="#">IB Diploma</a></li>
          </ul>
        </div>
        <div>
          <h4>Popular Subjects</h4>
          <ul>
            <li><a href="#">Mathematics</a></li>
            <li><a href="#">Sciences</a></li>
            <li><a href="#">English and Literature</a></li>
            <li><a href="#">Mother Tongue</a></li>
            <li><a href="#">Humanities</a></li>
            <li><a href="#">All Subjects</a></li>
          </ul>
        </div>
        <div>
          <h4>Company</h4>
          <ul>
            <li><a href="#">About us</a></li>
            <li><a href="{{ url_for('home') }}#terms">Terms</a></li>
            <li><a href="{{ url_for('home') }}#privacy">Privacy</a></li>
            <li><a href="{{ url_for('home') }}#help">Help and support</a></li>
            <li><a href="{{ url_for('login') }}" id="footerLogin">Log in</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="container footer-bottom">
      <div>
        <p>© Copyright 2015–<span id="y"></span> {{ site_name }} Ltd. All Rights Reserved.</p>
        <p class="disclaimer">Content aligned with MOE syllabuses for Singapore schools. {{ site_name }} is an independent platform and is not affiliated with the Ministry of Education Singapore or SEAB.</p>
      </div>
      <div class="socials" aria-label="Social links">
        <a href="#" aria-label="TikTok"><svg viewBox="0 0 24 24"><path d="M16 3c1 2 2 3 4 3v4c-1 0-3-.6-4-1.5V15a6 6 0 1 1-6-6c.3 0 .7 0 1 .1V7.1A10 10 0 0 0 10 7a8 8 0 1 0 8 8V3h-2z"/></svg></a>
        <a href="#" aria-label="Instagram"><svg viewBox="0 0 24 24"><path d="M7 3h10a4 4 0 0 1 4 4v10a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V7a4 4 0 0 1 4-4zm5 4a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm6-.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/></svg></a>
        <a href="#" aria-label="Facebook"><svg viewBox="0 0 24 24"><path d="M14 9h3V6h-3c-1.7 0-3 1.3-3 3v2H8v3h3v7h3v-7h3l1-3h-4V9c0-.6.4-1 1-1z"/></svg></a>
        <a href="#" aria-label="X"><svg viewBox="0 0 24 24"><path d="M17.5 3H20l-6.3 7.2L21 21h-4.7l-5-6-4.4 6H4l6.7-7.7L3 3h4.8l4.3 5.4L17.5 3z"/></svg></a>
      </div>
    </div>
  </footer>

  <!-- If you have static/app.js, keep it. The snippet below ensures mobile behavior works even without it. -->
  <script>
    // Footer year
    (function(){ var y=document.getElementById('y'); if(y) y.textContent=new Date().getFullYear(); })();

    // Mobile menu toggle + body scroll lock + accessibility
    (function(){
      const btn = document.getElementById('menuBtn');
      const menu = document.getElementById('mobileMenu');
      if(!btn || !menu) return;

      function openMenu(){
        menu.classList.add('show');
        menu.removeAttribute('hidden');
        btn.setAttribute('aria-expanded','true');
        document.body.style.overflow = 'hidden';
      }
      function closeMenu(){
        menu.classList.remove('show');
        menu.setAttribute('hidden','');
        btn.setAttribute('aria-expanded','false');
        document.body.style.overflow = '';
      }
      btn.addEventListener('click', () => {
        const isOpen = menu.classList.contains('show');
        isOpen ? closeMenu() : openMenu();
      });
      // Close on link click
      menu.addEventListener('click', (e) => {
        if(e.target.closest('a')) closeMenu();
      });
      // Close on Esc
      window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeMenu(); });
      // Close if resized to desktop
      window.addEventListener('resize', ()=>{ if(window.innerWidth > 900) closeMenu(); });
    })();

    // Desktop Courses dropdown (click/hover, closes on outside click)
    (function(){
      const btn = document.getElementById('coursesBtn');
      const dd  = document.getElementById('coursesMenu');
      if(!btn || !dd) return;

      let open = false;
      function setOpen(v){
        open = v;
        dd.classList.toggle('show', v);
        btn.setAttribute('aria-expanded', String(v));
      }
      btn.addEventListener('click', (e)=>{ e.preventDefault(); setOpen(!open); });
      btn.addEventListener('mouseenter', ()=>{ if(window.innerWidth>900) setOpen(true); });
      dd.addEventListener('mouseleave', ()=>{ if(window.innerWidth>900) setOpen(false); });
      document.addEventListener('click', (e)=>{
        if(!open) return;
        if(!dd.contains(e.target) && !btn.contains(e.target)) setOpen(false);
      });
      window.addEventListener('resize', ()=>{ if(window.innerWidth<=900) setOpen(false); });
    })();
  </script>

  <!-- Optional: keep your external JS too -->
  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
