<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P4 Science - Backbench</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: #f1f8ffff;
            margin: 0;
            padding: 0;
        }
        .main-content {
            margin-left: 0;
            padding: 0;
            min-height: 100vh;
            background: #f1f8ffff;
        }
        .header-bar {
            background: linear-gradient(90deg, #0360a5 0%, #0057b8 100%);
            color: #fff;
            border-radius: 18px;
            margin: 32px 32px 24px 32px;
            padding: 32px 40px 28px 40px;
            font-size: 2rem;
            font-weight: 700;
            box-shadow: 0 4px 24px rgba(3,96,165,0.08);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .header-bar .subtitle {
            font-size: 1.1rem;
            font-weight: 400;
            margin-top: 8px;
            color: #e3f0fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 32px 32px 32px;
        }
        .stats-row {
            display: flex;
            gap: 32px;
            margin-bottom: 32px;
        }
        .stat-card {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 2px 12px rgba(3,96,165,0.06);
            padding: 24px 32px;
            display: flex;
            align-items: center;
            gap: 18px;
            font-size: 1.2rem;
            font-weight: 600;
            color: #0360a5;
            flex: 1;
        }
        .stat-card .stat-icon {
            font-size: 2.2rem;
            background: #e3f0fa;
            border-radius: 50%;
            padding: 10px;
        }
        .progress-section {
            margin-bottom: 32px;
        }
        .progress-label {
            font-weight: 600;
            color: #0057b8;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .progress-bar {
            background: #e3f0fa;
            border-radius: 12px;
            height: 10px;
            overflow: hidden;
            position: relative;
        }
        .progress-fill {
            background: linear-gradient(90deg, #0360a5, #0057b8);
            height: 100%;
            border-radius: 12px;
            transition: width 0.5s;
        }
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 28px;
        }
        .topic-card {
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 2px 12px rgba(3,96,165,0.06);
            padding: 32px 28px 28px 28px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            transition: box-shadow 0.2s, transform 0.2s;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .topic-card:hover {
            box-shadow: 0 8px 32px rgba(0, 87, 184, 0.13);
            border-color: #0360a5;
            transform: translateY(-4px) scale(1.01);
        }
        .topic-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
            color: #0057b8;
        }
        .topic-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #0360a5;
            margin-bottom: 6px;
        }
        .topic-description {
            color: #4a5568;
            font-weight: 500;
            margin-bottom: 18px;
            line-height: 1.5;
        }
        .start-learning-btn {
            background: linear-gradient(90deg, #0360a5, #0057b8);
            border: none;
            border-radius: 10px;
            padding: 10px 22px;
            font-weight: 600;
            color: #fff;
            cursor: pointer;
            font-size: 1rem;
            margin-top: auto;
            transition: background 0.2s;
            width: 100%;
        }
        .start-learning-btn:hover {
            background: #0360a5;
        }
        
        /* Slide Modal Styles */
        .slide-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .slide-container {
            background: white;
            border-radius: 24px;
            width: 95vw;
            height: 90vh;
            max-width: 1000px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .slide-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .slide-title {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .slide-counter {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
        }

        .close-slide-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 12px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            color: white;
        }

        .close-slide-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .slide-content {
            height: calc(100% - 140px);
            overflow: hidden;
            position: relative;
        }

        .slide {
            width: 100%;
            height: 100%;
            padding: 40px;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: #f8fafc;
            overflow-y: auto;
        }

        .slide.active {
            display: flex;
        }

        .slide h2 {
            font-size: 2.5rem;
            color: #2d3748;
            margin-bottom: 24px;
            font-weight: 800;
        }

        .slide h3 {
            font-size: 2rem;
            color: #4a5568;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .slide p {
            font-size: 1.3rem;
            color: #4a5568;
            margin-bottom: 20px;
            max-width: 800px;
            line-height: 1.6;
        }

        .slide-icon {
            font-size: 6rem;
            margin-bottom: 24px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .slide-navigation {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 20px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #e2e8f0;
        }

        .nav-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .slide-progress {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e2e8f0;
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            transform: scale(1.2);
        }

        /* Enhanced Mobile Styles */
        @media (max-width: 768px) {
            body {
                font-size: 16px;
            }
            
            .header-bar {
                margin: 16px 16px 16px 16px;
                padding: 24px 20px 20px 20px;
                font-size: 1.4rem;
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
                border-radius: 12px;
            }
            
            .header-bar .subtitle {
                font-size: 0.95rem;
                margin-top: 4px;
            }
            
            .header-bar a {
                background:#fff !important; 
                color:#0360a5 !important; 
                font-weight:600 !important; 
                border-radius:8px !important; 
                padding:10px 18px !important; 
                text-decoration:none !important; 
                box-shadow:0 2px 8px rgba(3,96,165,0.10) !important; 
                font-size:0.9rem !important;
                width: auto;
                text-align: center;
            }
            
            .container {
                padding: 0 16px 24px 16px;
            }
            
            .stats-row {
                flex-direction: column;
                gap: 16px;
                margin-bottom: 24px;
            }
            
            .stat-card {
                padding: 20px 24px;
                font-size: 1.1rem;
                gap: 16px;
            }
            
            .stat-card .stat-icon {
                font-size: 2rem;
                padding: 8px;
            }
            
            .topics-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .topic-card {
                padding: 24px 20px 20px 20px;
                transform: none;
            }
            
            .topic-card:hover {
                transform: none;
            }
            
            .topic-icon {
                font-size: 2.2rem;
            }
            
            .topic-title {
                font-size: 1.2rem;
            }
            
            .topic-description {
                font-size: 0.95rem;
                margin-bottom: 16px;
            }
            
            .start-learning-btn {
                padding: 12px 20px;
                font-size: 0.95rem;
            }
            
            /* Mobile Modal Styles */
            .slide-container {
                width: 100vw;
                height: 100vh;
                border-radius: 0;
                max-width: none;
            }
            
            .slide-header {
                padding: 16px 20px;
                flex-wrap: wrap;
                gap: 12px;
            }
            
            .slide-title {
                font-size: 1.2rem;
                gap: 8px;
                flex: 1;
                min-width: 200px;
            }
            
            .slide-counter {
                padding: 6px 12px;
                font-size: 0.9rem;
                order: 3;
                flex-basis: 100%;
                text-align: center;
                margin-top: 8px;
            }
            
            .close-slide-btn {
                width: 36px;
                height: 36px;
                font-size: 1.1rem;
                flex-shrink: 0;
            }
            
            .slide-content {
                height: calc(100% - 160px);
            }
            
            .slide {
                padding: 20px 16px;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .slide h2 {
                font-size: 1.8rem;
                margin-bottom: 20px;
                line-height: 1.3;
            }
            
            .slide h3 {
                font-size: 1.5rem;
                margin-bottom: 16px;
                line-height: 1.3;
            }
            
            .slide p {
                font-size: 1.1rem;
                margin-bottom: 16px;
                line-height: 1.5;
                max-width: none;
            }
            
            .slide-icon {
                font-size: 4rem;
                margin-bottom: 20px;
            }
            
            .slide-navigation {
                padding: 16px 20px;
                flex-wrap: wrap;
                gap: 12px;
            }
            
            .nav-btn {
                padding: 12px 20px;
                font-size: 0.95rem;
                flex: 1;
                min-width: 100px;
                justify-content: center;
            }
            
            .slide-progress {
                order: 3;
                flex-basis: 100%;
                justify-content: center;
                margin-top: 8px;
            }
            
            .progress-dot {
                width: 10px;
                height: 10px;
            }
        }

        @media (max-width: 480px) {
            .header-bar {
                margin: 12px;
                padding: 20px 16px 16px 16px;
                font-size: 1.2rem;
            }
            
            .header-bar .subtitle {
                font-size: 0.9rem;
            }
            
            .container {
                padding: 0 12px 20px 12px;
            }
            
            .stat-card {
                padding: 16px 20px;
                font-size: 1rem;
            }
            
            .topic-card {
                padding: 20px 16px 16px 16px;
            }
            
            .topic-icon {
                font-size: 2rem;
            }
            
            .topic-title {
                font-size: 1.1rem;
            }
            
            .slide {
                padding: 16px 12px;
            }
            
            .slide h2 {
                font-size: 1.6rem;
            }
            
            .slide h3 {
                font-size: 1.3rem;
            }
            
            .slide p {
                font-size: 1rem;
            }
            
            .slide-icon {
                font-size: 3.5rem;
            }
            
            .nav-btn {
                padding: 10px 16px;
                font-size: 0.9rem;
            }
        }

        /* Touch-friendly improvements */
        @media (hover: none) and (pointer: coarse) {
            .topic-card:hover {
                transform: none;
                box-shadow: 0 2px 12px rgba(3,96,165,0.06);
            }
            
            .topic-card:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }
            
            .start-learning-btn:hover {
                background: linear-gradient(90deg, #0360a5, #0057b8);
            }
            
            .start-learning-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }
            
            .nav-btn:hover {
                transform: none;
                box-shadow: none;
            }
            
            .nav-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }
        }
    </style>
</head>
<body>
    <div class="main-content">
        <div class="header-bar">
            <div>
                P4 Science Study Guide
                <div class="subtitle">Skills you'll gain: Explore all topics of the Primary 4 Science curriculum.</div>
            </div>
            <a href="#" onclick="alert('Navigate back to home')" style="background:#fff; color:#0360a5; font-weight:600; border-radius:10px; padding:10px 22px; text-decoration:none; box-shadow:0 2px 8px rgba(3,96,165,0.10); font-size:1rem;">
                ‚Üê Back to Home
            </a>
        </div>
        <div class="container">
            <div class="stats-row">
                <div class="stat-card">
                    <span class="stat-icon">üèÜ</span>
                    <span id="points-display">0 Points</span>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">‚≠ê</span>
                    <span id="topics-display">0/6 Topics</span>
                </div>
            </div>
            <div class="progress-section">
                <div class="progress-label">
                    <span>Overall Progress</span>
                    <span id="progress-percentage">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="overall-progress" style="width: 0%"></div>
                </div>
            </div>
            <div class="topics-grid">
                <div class="topic-card plants" onclick="openSlideModal('plants')">
                    <div class="topic-icon">üå±</div>
                    <div class="topic-title">Plants and Their Parts</div>
                    <div class="topic-description">Discover roots, stems, leaves, and flowers!</div>
                    <button class="start-learning-btn">Start Learning</button>
                </div>
                <div class="topic-card animals" onclick="openSlideModal('animals')">
                    <div class="topic-icon">üêõ</div>
                    <div class="topic-title">Animals and Their Habitats</div>
                    <div class="topic-description">Explore where animals live and how they adapt!</div>
                    <button class="start-learning-btn">Start Learning</button>
                </div>
                <div class="topic-card heat" onclick="openSlideModal('heat')">
                    <div class="topic-icon">üå°Ô∏è</div>
                    <div class="topic-title">Heat and Temperature</div>
                    <div class="topic-description">Learn about hot and cold, and how heat moves!</div>
                    <button class="start-learning-btn">Start Learning</button>
                </div>
                <div class="topic-card water" onclick="openSlideModal('water')">
                    <div class="topic-icon">üíß</div>
                    <div class="topic-title">Water Cycle</div>
                    <div class="topic-description">Follow water on its amazing journey!</div>
                    <button class="start-learning-btn">Start Learning</button>
                </div>
                <div class="topic-card earth" onclick="openSlideModal('earth')">
                    <div class="topic-icon">üåç</div>
                    <div class="topic-title">Earth and Space</div>
                    <div class="topic-description">Explore our planet and the universe!</div>
                    <button class="start-learning-btn">Start Learning</button>
                </div>
                <div class="topic-card machines" onclick="openSlideModal('machines')">
                    <div class="topic-icon">‚ö°</div>
                    <div class="topic-title">Simple Machines</div>
                    <div class="topic-description">Discover tools that make work easier!</div>
                    <button class="start-learning-btn">Start Learning</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide Modal -->
    <div class="slide-modal" id="slide-modal">
        <div class="slide-container">
            <div class="slide-header">
                <h2 class="slide-title" id="slide-title">
                    <span id="slide-icon">üå±</span>
                    <span id="slide-title-text">Plants and Their Parts</span>
                </h2>
                <div class="slide-counter" id="slide-counter">1 / 3</div>
                <button class="close-slide-btn" onclick="closeSlideModal()">‚úï</button>
            </div>
            <div class="slide-content" id="slide-content">
                <!-- Slides will be loaded here -->
            </div>
            <div class="slide-navigation">
                <button class="nav-btn" id="prev-slide-btn" onclick="previousSlide()" disabled>
                    ‚Üê Previous
                </button>
                <div class="slide-progress" id="slide-progress">
                    <!-- Progress dots will be generated here -->
                </div>
                <button class="nav-btn" id="next-slide-btn" onclick="nextSlide()">
                    Next ‚Üí
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentSlideIndex = 0;
        let currentTopic = '';
        let totalPoints = 0;
        let completedTopics = 0;

        // Simplified slide content for demo
        const slideContent = {
            plants: {
                title: "Plants and Their Parts",
                icon: "üå±",
                slides: [
                    {
                        type: "intro",
                        content: `
                            <div class="slide-icon">üå±</div>
                            <h2>Welcome to Plants!</h2>
                            <p>Let's learn about plant parts and how they work together!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">üåø</div>
                            <h3>What Are Plants?</h3>
                            <p>Plants are living things that make their own food using sunlight!</p>
                            <p>They have special parts: roots, stems, leaves, and flowers.</p>
                        `
                    },
                    {
                        type: "conclusion",
                        content: `
                            <div class="slide-icon">üåü</div>
                            <h2>Great Job!</h2>
                            <p>You've learned about plants and their amazing parts!</p>
                            <p>Keep exploring to learn more! üå±</p>
                        `
                    }
                ]
            },
            animals: {
                title: "Animals and Their Habitats",
                icon: "üêõ",
                slides: [
                    {
                        type: "intro",
                        content: `
                            <div class="slide-icon">ü¶Å</div>
                            <h2>Welcome to Animal Habitats!</h2>
                            <p>Explore where animals live and how they survive!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">üè†</div>
                            <h3>What is a Habitat?</h3>
                            <p>A habitat is an animal's home that provides food, water, shelter, and space.</p>
                        `
                    },
                    {
                        type: "conclusion",
                        content: `
                            <div class="slide-icon">üåü</div>
                            <h2>Awesome!</h2>
                            <p>You've learned about animal habitats!</p>
                            <p>Animals are amazing! üêæ</p>
                        `
                    }
                ]
            },
            heat: {
                title: "Heat and Temperature",
                icon: "üå°Ô∏è",
                slides: [
                    {
                        type: "intro",
                        content: `
                            <div class="slide-icon">üå°Ô∏è</div>
                            <h2>Heat and Temperature!</h2>
                            <p>Learn about hot and cold and how heat moves!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">üî•</div>
                            <h3>What is Heat?</h3>
                            <p>Heat is energy that makes things warm! It always moves from hot to cold.</p>
                        `
                    },
                    {
                        type: "conclusion",
                        content: `
                            <div class="slide-icon">üåü</div>
                            <h2>Excellent!</h2>
                            <p>You've learned about heat and temperature!</p>
                            <p>Science is cool! üå°Ô∏è</p>
                        `
                    }
                ]
            },
            water: {
                title: "Water Cycle",
                icon: "üíß",
                slides: [
                    {
                        type: "intro",
                        content: `
                            <div class="slide-icon">üíß</div>
                            <h2>The Water Cycle!</h2>
                            <p>Follow water on its amazing journey around Earth!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">‚òÅÔ∏è</div>
                            <h3>How Water Moves</h3>
                            <p>Water evaporates, forms clouds, falls as rain, and flows back to the ocean!</p>
                        `
                    },
                    {
                        type: "conclusion",
                        content: `
                            <div class="slide-icon">üåü</div>
                            <h2>Fantastic!</h2>
                            <p>You've learned about the water cycle!</p>
                            <p>Water is amazing! üíß</p>
                        `
                    }
                ]
            },
            earth: {
                title: "Earth and Space",
                icon: "üåç",
                slides: [
                    {
                        type: "intro",
                        content: `
                            <div class="slide-icon">üåç</div>
                            <h2>Earth and Space!</h2>
                            <p>Explore our planet and the universe beyond!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">‚òÄÔ∏è</div>
                            <h3>Our Solar System</h3>
                            <p>Earth orbits the sun with 7 other planets in our solar system!</p>
                        `
                    },
                    {
                        type: "conclusion",
                        content: `
                            <div class="slide-icon">üåü</div>
                            <h2>Amazing!</h2>
                            <p>You've learned about Earth and space!</p>
                            <p>The universe is incredible! üöÄ</p>
                        `
                    }
                ]
            },
            machines: {
                title: "Simple Machines",
                icon: "‚ö°",
                slides: [
                    {
                        type: "intro",
                        content: `
                            <div class="slide-icon">‚ö°</div>
                            <h2>Simple Machines!</h2>
                            <p>Discover tools that make work easier!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">üîß</div>
                            <h3>What Are Simple Machines?</h3>
                            <p>Simple machines help us do work more easily using levers, wheels, and more!</p>
                        `
                    },
                    {
                        type: "conclusion",
                        content: `
                            <div class="slide-icon">üåü</div>
                            <h2>Brilliant!</h2>
                            <p>You've learned about simple machines!</p>
                            <p>Engineering is fun! ‚ö°</p>
                        `
                    }
                ]
            }
        };

        // Functions for modal and slide management
        function openSlideModal(topic) {
            currentTopic = topic;
            currentSlideIndex = 0;
            
            const modal = document.getElementById('slide-modal');
            const slideIcon = document.getElementById('slide-icon');
            const slideTitle = document.getElementById('slide-title-text');
            
            slideIcon.textContent = slideContent[topic].icon;
            slideTitle.textContent = slideContent[topic].title;
            
            loadSlide();
            updateSlideProgress();
            modal.style.display = 'flex';
            
            // Prevent body scroll
            document.body.style.overflow = 'hidden';
        }

        function closeSlideModal() {
            const modal = document.getElementById('slide-modal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function loadSlide() {
            const slideContentEl = document.getElementById('slide-content');
            const slides = slideContent[currentTopic].slides;
            slideContentEl.innerHTML = '';
            const slideEl = document.createElement('div');
            slideEl.className = 'slide active';
            slideEl.innerHTML = slides[currentSlideIndex].content;
            slideContentEl.appendChild(slideEl);
            updateSlideCounter();
            updateNavigationButtons();
        }

        function updateSlideCounter() {
            const counter = document.getElementById('slide-counter');
            const totalSlides = slideContent[currentTopic].slides.length;
            counter.textContent = `${currentSlideIndex + 1} / ${totalSlides}`;
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-slide-btn');
            const nextBtn = document.getElementById('next-slide-btn');
            const totalSlides = slideContent[currentTopic].slides.length;
            prevBtn.disabled = currentSlideIndex === 0;
            nextBtn.disabled = false;
            if (currentSlideIndex === totalSlides - 1) {
                nextBtn.textContent = 'Complete!';
            } else {
                nextBtn.textContent = 'Next ‚Üí';
            }
        }

        function updateSlideProgress() {
            const progressEl = document.getElementById('slide-progress');
            const totalSlides = slideContent[currentTopic].slides.length;
            progressEl.innerHTML = '';
            for (let i = 0; i < totalSlides; i++) {
                const dot = document.createElement('div');
                dot.className = `progress-dot ${i === currentSlideIndex ? 'active' : ''}`;
                progressEl.appendChild(dot);
            }
        }

        function nextSlide() {
            const totalSlides = slideContent[currentTopic].slides.length;
            if (currentSlideIndex < totalSlides - 1) {
                currentSlideIndex++;
                loadSlide();
                updateSlideProgress();
            } else {
                completeSlide();
            }
        }

        function previousSlide() {
            if (currentSlideIndex > 0) {
                currentSlideIndex--;
                loadSlide();
                updateSlideProgress();
            }
        }

        function completeSlide() {
            totalPoints += 100;
            completedTopics++;
            updateDashboard();
            closeSlideModal();
                        fetch('/update_learning_progress', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ topic: currentTopic })
            });

            alert(`üéâ Congratulations! You've completed ${slideContent[currentTopic].title} and earned 100 points!`);
        }

        function updateDashboard() {
            document.getElementById('points-display').textContent = `${totalPoints} Points`;
            document.getElementById('topics-display').textContent = `${completedTopics}/6 Topics`;
            const percent = Math.round((completedTopics / 6) * 100);
            document.getElementById('progress-percentage').textContent = `${percent}%`;
            document.getElementById('overall-progress').style.width = `${percent}%`;
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            const modal = document.getElementById('slide-modal');
            if (modal && modal.style.display === 'flex') {
                if (e.key === 'ArrowLeft') {
                    previousSlide();
                } else if (e.key === 'ArrowRight') {
                    nextSlide();
                } else if (e.key === 'Escape') {
                    closeSlideModal();
                }
            }
        });

        // Prevent zoom on iOS
        document.addEventListener('touchstart', function(event) {
            if (event.touches.length > 1) {
                event.preventDefault();
            }
        }, { passive: false });

        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>