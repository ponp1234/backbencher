<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P4 Science - Backbench</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
             background: #f1f8ffff;
            margin: 0;
            padding: 0;
        }
        .main-content {
            margin-left: 0;
            padding: 0;
            min-height: 100vh;
            background: #f1f8ffff;
        }
        .header-bar {
            background: linear-gradient(90deg, #0360a5 0%, #0057b8 100%);
            color: #fff;
            border-radius: 18px;
            margin: 32px 32px 24px 32px;
            padding: 32px 40px 28px 40px;
            font-size: 2rem;
            font-weight: 700;
            box-shadow: 0 4px 24px rgba(3,96,165,0.08);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .header-bar .subtitle {
            font-size: 1.1rem;
            font-weight: 400;
            margin-top: 8px;
            color: #e3f0fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 32px 32px 32px;
        }
        .stats-row {
            display: flex;
            gap: 32px;
            margin-bottom: 32px;
        }
        .stat-card {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 2px 12px rgba(3,96,165,0.06);
            padding: 24px 32px;
            display: flex;
            align-items: center;
            gap: 18px;
            font-size: 1.2rem;
            font-weight: 600;
            color: #0360a5;
        }
        .stat-card .stat-icon {
            font-size: 2.2rem;
            background: #e3f0fa;
            border-radius: 50%;
            padding: 10px;
        }
        .progress-section {
            margin-bottom: 32px;
        }
        .progress-label {
            font-weight: 600;
            color: #0057b8;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .progress-bar {
            background: #e3f0fa;
            border-radius: 12px;
            height: 10px;
            overflow: hidden;
            position: relative;
        }
        .progress-fill {
            background: linear-gradient(90deg, #0360a5, #0057b8);
            height: 100%;
            border-radius: 12px;
            transition: width 0.5s;
        }
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 28px;
        }
        .topic-card {
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 2px 12px rgba(3,96,165,0.06);
            padding: 32px 28px 28px 28px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            transition: box-shadow 0.2s, transform 0.2s;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .topic-card:hover {
            box-shadow: 0 8px 32px rgba(0, 87, 184, 0.13);
            border-color: #0360a5;
            transform: translateY(-4px) scale(1.01);
        }
        .topic-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
            color: #0057b8;
        }
        .topic-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #0360a5;
            margin-bottom: 6px;
        }
        .topic-description {
            color: #4a5568;
            font-weight: 500;
            margin-bottom: 18px;
            line-height: 1.5;
        }
        .start-learning-btn {
            background: linear-gradient(90deg, #0360a5, #0057b8);
            border: none;
            border-radius: 10px;
            padding: 10px 22px;
            font-weight: 600;
            color: #fff;
            cursor: pointer;
            font-size: 1rem;
            margin-top: auto;
            transition: background 0.2s;
        }
        .start-learning-btn:hover {
            background: #0360a5;
        }
        /* Slide Modal Styles */
  .slide-modal {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(12px);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        animation: fadeIn 0.4s ease;
    }

    .slide-container {
        background: white;
        border-radius: 0;
        width: 100vw;
        height: 100vh;
        max-width: 100%;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        animation: slideUp 0.5s ease;
    }

    /* NEW animations */
    @keyframes fadeIn {
        from {opacity: 0;}
        to {opacity: 1;}
    }
    @keyframes slideUp {
        from {transform: translateY(20px); opacity: 0;}
        to {transform: translateY(0); opacity: 1;}
    }

    /* Bigger and centered content */
    .slide-content {
        flex: 1;
        overflow-y: auto;
        padding: 40px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        background: #f8fafc;
    }
    .slide h2 {
        font-size: 3rem;
        margin-bottom: 20px;
    }
    .slide p {
        font-size: 1.4rem;
        line-height: 1.6;
        max-width: 900px;
    }

    /* Navigation bar improved */
    .slide-navigation {
        background: #fff;
        padding: 16px 32px;
        border-top: 1px solid #e2e8f0;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .nav-btn {
        background: linear-gradient(135deg, #4f46e5, #3b82f6);
        color: white;
        border: none;
        border-radius: 12px;
        padding: 14px 28px;
        font-size: 1.2rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    .nav-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 24px rgba(59, 130, 246, 0.4);
    }

    /* Mobile-friendly */
    @media (max-width: 768px) {
        .slide-content {
            padding: 20px;
        }
        .slide h2 {
            font-size: 2rem;
        }
        .slide p {
            font-size: 1.1rem;
        }
    }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .fun-fact-slide {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-radius: 20px;
            padding: 32px;
            margin: 20px 0;
            border-left: 6px solid #f59e0b;
            max-width: 700px;
        }

        .fun-fact-slide strong {
            color: #92400e;
            font-size: 1.4rem;
        }

        .slide-navigation {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 20px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #e2e8f0;
        }

        .nav-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .slide-progress {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e2e8f0;
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            transform: scale(1.2);
        }

        .quiz-slide {
            background: #f0f9ff;
            border-radius: 20px;
            padding: 32px;
            max-width: 800px;
            width: 100%;
        }

        .quiz-question {
            font-size: 1.4rem;
            color: #2d3748;
            margin-bottom: 24px;
            font-weight: 600;
        }

        .quiz-options {
            display: grid;
            gap: 12px;
            margin-bottom: 24px;
        }

        .quiz-option {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 16px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .quiz-option:hover {
            border-color: #cbd5e1;
            background: #f8fafc;
        }

        .quiz-option.selected {
            background: #dbeafe;
            border-color: #3b82f6;
            color: #1e40af;
        }

        .quiz-option.correct {
            background: #dcfce7;
            border-color: #22c55e;
            color: #15803d;
        }

        .quiz-option.incorrect {
            background: #fecaca;
            border-color: #ef4444;
            color: #dc2626;
        }

        .quiz-explanation {
            background: #f0fdf4;
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid #22c55e;
            margin-top: 20px;
            display: none;
        }

        .quiz-explanation.show {
            display: block;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .topics-grid {
                grid-template-columns: 1fr;
            }
            
            .welcome-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }
            
            .stats-container {
                width: 100%;
                justify-content: space-between;
            }
            
            .slide-container {
                width: 100vw;
                height: 100vh;
                border-radius: 0;
            }
            
            .slide {
                padding: 20px;
            }
            
            .slide h2 {
                font-size: 2rem;
            }
            
            .slide p {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="main-content">
        <div class="header-bar">
            <div>
                P4 Science Study Guide
                <div class="subtitle">Skills you'll gain: Explore all topics of the Primary 4 Science curriculum.</div>
            </div>
            <a href="{{ url_for('user_home') }}" style="background:#fff; color:#0360a5; font-weight:600; border-radius:10px; padding:10px 22px; text-decoration:none; box-shadow:0 2px 8px rgba(3,96,165,0.10); font-size:1rem;">
                â† Back to Home
            </a>
        </div>
        <div class="container">
            <div class="stats-row">
                <div class="stat-card">
                    <span class="stat-icon">ğŸ†</span>
                    <span id="points-display">{{ total_points|default(0) }} Points</span>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">â­</span>
                    <span id="topics-display">{{ completed_topics|default(0) }}/6 Topics</span>
                </div>
            </div>
            <div class="progress-section">
                <div class="progress-label">
                    <span>Overall Progress</span>
                    <span id="progress-percentage">{{ ((completed_topics|default(0) / 6) * 100) | round(0) }}%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="overall-progress" style="width: {{ ((completed_topics|default(0) / 6) * 100) | round(0) }}%"></div>
                </div>
            </div>
            <div class="topics-grid">
                <div class="topic-card plants" onclick="openSlideModal('plants')">
                    <div class="topic-icon">ğŸŒ±</div>
                    <div class="topic-title">Plants and Their Parts</div>
                    <div class="topic-description">Discover roots, stems, leaves, and flowers!</div>
                    <button class="start-learning-btn">Start Learning</button>
                </div>
                <div class="topic-card animals" onclick="openSlideModal('animals')">
                    <div class="topic-icon">ğŸ›</div>
                    <div class="topic-title">Animals and Their Habitats</div>
                    <div class="topic-description">Explore where animals live and how they adapt!</div>
                    <button class="start-learning-btn">Start Learning</button>
                </div>
                <div class="topic-card heat" onclick="openSlideModal('heat')">
                    <div class="topic-icon">ğŸŒ¡ï¸</div>
                    <div class="topic-title">Heat and Temperature</div>
                    <div class="topic-description">Learn about hot and cold, and how heat moves!</div>
                    <button class="start-learning-btn">Start Learning</button>
                </div>
                <div class="topic-card water" onclick="openSlideModal('water')">
                    <div class="topic-icon">ğŸ’§</div>
                    <div class="topic-title">Water Cycle</div>
                    <div class="topic-description">Follow water on its amazing journey!</div>
                    <button class="start-learning-btn">Start Learning</button>
                </div>
                <div class="topic-card earth" onclick="openSlideModal('earth')">
                    <div class="topic-icon">ğŸŒ</div>
                    <div class="topic-title">Earth and Space</div>
                    <div class="topic-description">Explore our planet and the universe!</div>
                    <button class="start-learning-btn">Start Learning</button>
                </div>
                <div class="topic-card machines" onclick="openSlideModal('machines')">
                    <div class="topic-icon">âš¡</div>
                    <div class="topic-title">Simple Machines</div>
                    <div class="topic-description">Discover tools that make work easier!</div>
                    <button class="start-learning-btn">Start Learning</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide Modal -->
    <div class="slide-modal" id="slide-modal">
        <div class="slide-container">
            <div class="slide-header">
                <h2 class="slide-title" id="slide-title">
                    <span id="slide-icon">ğŸŒ±</span>
                    <span id="slide-title-text">Plants and Their Parts</span>
                </h2>
                <div class="slide-counter" id="slide-counter">1 / 10</div>
                <button class="close-slide-btn" onclick="closeSlideModal()">âœ•</button>
            </div>
            <!-- Horizontal thumbnail bar -->
            <div class="slide-thumbnails" id="slide-thumbnails" style="display:flex;overflow-x:auto;gap:8px;padding:10px 24px 0 24px;background:#f8fafc;">
                <!-- Thumbnails will be generated here -->
            </div>
            <div class="slide-content" id="slide-content">
                <!-- Slides will be loaded here -->
            </div>
            <div class="slide-navigation">
                <button class="nav-btn" id="prev-slide-btn" onclick="previousSlide()" disabled>
                    â† Previous
                </button>
                <div class="slide-progress" id="slide-progress">
                    <!-- Progress dots will be generated here -->
                </div>
                <button class="nav-btn" id="next-slide-btn" onclick="nextSlide()">
                    Next â†’
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentSlideIndex = 0;
        let currentTopic = '';
        let totalPoints = {{ total_points|default(0) }};
        let completedTopics = {{ completed_topics|default(0) }};

        // Slide content database
        const slideContent = {
            plants: {
                title: "Plants and Their Parts",
                icon: "ğŸŒ±",
                slides: [
                    {
                        type: "intro",
                        content: `
                            <div class="slide-icon">ğŸŒ±</div>
                            <h2>Welcome to Plants and Their Parts!</h2>
                            <p>Get ready to discover the amazing world of plants and learn how each part has a special job to help plants grow and survive!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒ¿</div>
                            <h3>What Are Plants?</h3>
                            <p>Plants are living things that can make their own food using sunlight! They are found everywhere on Earth - from tiny grass to giant trees.</p>
                            <p>Unlike animals, plants can't move around to find food. Instead, they have special parts that work together to help them survive.</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒ³</div>
                            <h3>The Main Parts of a Plant</h3>
                            <p>Every plant has four main parts that work together like a team:</p>
                            <p><strong>ğŸŒ¿ Roots â€¢ ğŸŒ± Stem â€¢ ğŸƒ Leaves â€¢ ğŸŒ¸ Flowers</strong></p>
                            <p>Each part has a very important job to do!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒ¿</div>
                            <h3>Roots - The Underground Workers</h3>
                            <p>Roots grow underground where we can't see them. They have two very important jobs:</p>
                            <p><strong>1. Absorb water and nutrients</strong> from the soil to feed the plant</p>
                            <p><strong>2. Hold the plant firmly</strong> in the ground so it doesn't fall over</p>
                            <p>Think of roots like the plant's mouth and anchor!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒ±</div>
                            <h3>Stem - The Plant's Highway</h3>
                            <p>The stem is like a highway system inside the plant! It carries water and nutrients from the roots up to the leaves.</p>
                            <p>The stem also carries the food that leaves make down to the rest of the plant.</p>
                            <p>Some stems are soft like flowers, others are hard like tree trunks!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸƒ</div>
                            <h3>Leaves - The Food Factories</h3>
                            <p>Leaves are amazing! They make food for the plant using sunlight, water, and air.</p>
                            <p>This special process is called <strong>photosynthesis</strong> - it's like cooking with sunlight!</p>
                            <p>Leaves also help the plant breathe by taking in carbon dioxide and giving out oxygen.</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒ¸</div>
                            <h3>Flowers - The Baby Makers</h3>
                            <p>Flowers are the most colorful part of plants! They help plants make seeds to grow new baby plants.</p>
                            <p>Flowers attract bees and butterflies with their bright colors and sweet smell.</p>
                            <p>When insects visit flowers, they help spread pollen to make new seeds!</p>
                        `
                    },
                    {
                        type: "fun-fact",
                        content: `
                            <div class="slide-icon">ğŸŒ²</div>
                            <h3>Amazing Plant Facts!</h3>
                            <div class="fun-fact-slide">
                                <strong>ğŸŒ¿ Did you know?</strong> The tallest tree in the world is a redwood tree that's over 115 meters tall - that's like a 35-story building!
                            </div>
                            <div class="fun-fact-slide">
                                <strong>ğŸŒ± Cool fact:</strong> Some plant roots can grow deeper than the plant is tall!
                            </div>
                        `
                    },
                    {
                        type: "quiz",
                        content: `
                            <div class="quiz-slide">
                                <h3>Test Your Knowledge!</h3>
                                <div class="quiz-question">Which part of a plant absorbs water and nutrients from the soil?</div>
                                <div class="quiz-options">
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">Leaves</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, true)">Roots</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">Flowers</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">Stem</button>
                                </div>
                                <div class="quiz-explanation">
                                    <strong>Correct!</strong> Roots grow underground and absorb water and nutrients from soil to feed the entire plant.
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "conclusion",
                        content: `
                            <div class="slide-icon">ğŸŒŸ</div>
                            <h2>Congratulations!</h2>
                            <p>You've learned all about plant parts and how they work together!</p>
                            <p>Remember: <strong>Roots</strong> absorb, <strong>Stems</strong> transport, <strong>Leaves</strong> make food, and <strong>Flowers</strong> make seeds.</p>
                            <p>Great job exploring the wonderful world of plants! ğŸŒ±</p>
                        `
                    }
                ]
            },
            animals: {
                title: "Animals and Their Habitats",
                icon: "ğŸ›",
                slides: [
                    {
                        type: "intro",
                        content: `
                            <div class="slide-icon">ğŸ¦</div>
                            <h2>Welcome to Animal Habitats!</h2>
                            <p>Get ready to explore where animals live and discover how they adapt to survive in different environments around the world!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸ </div>
                            <h3>What is a Habitat?</h3>
                            <p>A habitat is the natural home where an animal lives. It provides everything the animal needs to survive:</p>
                            <p><strong>ğŸ½ï¸ Food</strong> â€¢ <strong>ğŸ’§ Water</strong> â€¢ <strong>ğŸ¡ Shelter</strong> â€¢ <strong>ğŸŒ Space</strong></p>
                            <p>Different animals need different types of habitats!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒ²</div>
                            <h3>Forest Habitats</h3>
                            <p>Forests are full of trees and provide homes for many animals!</p>
                            <p><strong>ğŸ¿ï¸ Squirrels</strong> live in tree holes and eat nuts</p>
                            <p><strong>ğŸ¦… Birds</strong> build nests in branches and eat insects</p>
                            <p><strong>ğŸ» Bears</strong> find berries and fish in forest streams</p>
                            <p>Trees give animals shelter, food, and places to hide from danger!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒŠ</div>
                            <h3>Ocean Habitats</h3>
                            <p>The ocean is the largest habitat on Earth! It's home to amazing sea creatures.</p>
                            <p><strong>ğŸ  Fish</strong> swim in schools for protection</p>
                            <p><strong>ğŸ‹ Whales</strong> are the largest animals in the ocean</p>
                            <p><strong>ğŸ¦€ Crabs</strong> live on the ocean floor and in coral reefs</p>
                            <p>Ocean animals have special features like gills to breathe underwater!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸœï¸</div>
                            <h3>Desert Habitats</h3>
                            <p>Deserts are very hot and dry, but some animals love living there!</p>
                            <p><strong>ğŸª Camels</strong> store water in their humps</p>
                            <p><strong>ğŸ¦ Lizards</strong> hide under rocks during the hot day</p>
                            <p><strong>ğŸ¦‚ Scorpions</strong> come out at night when it's cooler</p>
                            <p>Desert animals are experts at saving water!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒ¾</div>
                            <h3>Grassland Habitats</h3>
                            <p>Grasslands are open areas covered with grass - perfect for some animals!</p>
                            <p><strong>ğŸ¦“ Zebras</strong> eat grass and live in herds for safety</p>
                            <p><strong>ğŸ¦ Lions</strong> hunt other animals in the grasslands</p>
                            <p><strong>ğŸ˜ Elephants</strong> roam across grasslands looking for food</p>
                            <p>Many grassland animals are fast runners!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">â„ï¸</div>
                            <h3>Arctic Habitats</h3>
                            <p>The Arctic is very cold and covered with ice and snow!</p>
                            <p><strong>ğŸ§ Penguins</strong> have thick feathers and fat to stay warm</p>
                            <p><strong>ğŸ»â€â„ï¸ Polar bears</strong> have white fur to blend in with snow</p>
                            <p><strong>ğŸ¦­ Seals</strong> have thick skin called blubber to keep warm</p>
                            <p>Arctic animals have special features to survive the cold!</p>
                        `
                    },
                    {
                        type: "fun-fact",
                        content: `
                            <div class="slide-icon">ğŸ¦‹</div>
                            <h3>Amazing Animal Facts!</h3>
                            <div class="fun-fact-slide">
                                <strong>ğŸ§ Did you know?</strong> Emperor penguins can hold their breath for up to 22 minutes while diving for food!
                            </div>
                            <div class="fun-fact-slide">
                                <strong>ğŸª Cool fact:</strong> Camels can drink up to 40 gallons of water in one go!
                            </div>
                        `
                    },
                    {
                        type: "quiz",
                        content: `
                            <div class="quiz-slide">
                                <h3>Test Your Knowledge!</h3>
                                <div class="quiz-question">Which habitat would be best for a polar bear?</div>
                                <div class="quiz-options">
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">Desert</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">Forest</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, true)">Arctic</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">Ocean</button>
                                </div>
                                <div class="quiz-explanation">
                                    <strong>Correct!</strong> Polar bears live in the Arctic where their white fur helps them blend in with snow and ice.
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "conclusion",
                        content: `
                            <div class="slide-icon">ğŸŒŸ</div>
                            <h2>Congratulations!</h2>
                            <p>You've learned all about different animal habitats and how animals adapt!</p>
                            <p>Remember: Every animal needs the right habitat with food, water, shelter, and space to survive.</p>
                            <p>Great job exploring the amazing world of animal habitats! ğŸ¾</p>
                        `
                    }
                ]
            },
            heat: {
                title: "Heat and Temperature",
                icon: "ğŸŒ¡ï¸",
                slides: [
                    {
                        type: "intro",
                        content: `
                            <div class="slide-icon">ğŸŒ¡ï¸</div>
                            <h2>Welcome to Heat and Temperature!</h2>
                            <p>Get ready to discover the difference between hot and cold, and learn how heat moves around us!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸ”¥</div>
                            <h3>What is Heat?</h3>
                            <p>Heat is a form of energy that makes things warm! When something has heat energy, its tiny particles move faster.</p>
                            <p>Heat always moves from hot things to cold things - never the other way around!</p>
                            <p>We can feel heat when we touch something warm or stand near a fire.</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒ¡ï¸</div>
                            <h3>What is Temperature?</h3>
                            <p>Temperature tells us how hot or cold something is. We measure it with a thermometer!</p>
                            <p><strong>Hot:</strong> ğŸ”¥ Fire, boiling water, summer day</p>
                            <p><strong>Warm:</strong> â˜€ï¸ Body temperature, warm bath</p>
                            <p><strong>Cool:</strong> ğŸŒ¬ï¸ Morning air, swimming pool</p>
                            <p><strong>Cold:</strong> â„ï¸ Ice, winter day, refrigerator</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">â¡ï¸</div>
                            <h3>How Heat Moves</h3>
                            <p>Heat moves in three special ways:</p>
                            <p><strong>ğŸ”¥ Conduction:</strong> Heat moves through touching (like a hot spoon)</p>
                            <p><strong>ğŸŒŠ Convection:</strong> Heat moves through liquids and gases (like hot air rising)</p>
                            <p><strong>â˜€ï¸ Radiation:</strong> Heat moves through space (like sun warming your face)</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸ³</div>
                            <h3>Heat in Cooking</h3>
                            <p>We use heat to cook our food and make it taste better!</p>
                            <p><strong>ğŸ”¥ Boiling:</strong> Water gets so hot it turns into steam bubbles</p>
                            <p><strong>ğŸ Baking:</strong> Hot air in an oven cooks bread and cakes</p>
                            <p><strong>ğŸ¥˜ Frying:</strong> Hot oil cooks food quickly</p>
                            <p>Heat changes food to make it safe and delicious to eat!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸ§Š</div>
                            <h3>Heat and States of Matter</h3>
                            <p>Heat can change how things look and feel!</p>
                            <p><strong>â„ï¸ Ice (Solid):</strong> Very cold water is hard and frozen</p>
                            <p><strong>ğŸ’§ Water (Liquid):</strong> When ice warms up, it melts into water</p>
                            <p><strong>ğŸ’¨ Steam (Gas):</strong> When water gets very hot, it becomes invisible steam</p>
                            <p>Adding or removing heat changes what form things take!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸ </div>
                            <h3>Heat in Our Homes</h3>
                            <p>We use heat to keep our homes comfortable!</p>
                            <p><strong>ğŸ”¥ Heaters:</strong> Warm up rooms when it's cold outside</p>
                            <p><strong>ğŸ› Hot water:</strong> For baths, showers, and washing dishes</p>
                            <p><strong>ğŸ§¥ Clothes:</strong> Trap our body heat to keep us warm</p>
                            <p>Good insulation helps keep heat inside when it's cold!</p>
                        `
                    },
                    {
                        type: "fun-fact",
                        content: `
                            <div class="slide-icon">ğŸŒŸ</div>
                            <h3>Amazing Heat Facts!</h3>
                            <div class="fun-fact-slide">
                                <strong>â˜€ï¸ Did you know?</strong> The sun's surface temperature is about 5,500Â°C - that's hot enough to melt any metal!
                            </div>
                            <div class="fun-fact-slide">
                                <strong>ğŸŒ¡ï¸ Cool fact:</strong> The coldest temperature ever recorded on Earth was -89Â°C in Antarctica!
                            </div>
                        `
                    },
                    {
                        type: "quiz",
                        content: `
                            <div class="quiz-slide">
                                <h3>Test Your Knowledge!</h3>
                                <div class="quiz-question">What happens when you add heat to ice?</div>
                                <div class="quiz-options">
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">It becomes harder</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, true)">It melts into water</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">It disappears</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">Nothing happens</button>
                                </div>
                                <div class="quiz-explanation">
                                    <strong>Correct!</strong> When ice gets warm enough, it melts and changes from solid to liquid water.
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "conclusion",
                        content: `
                            <div class="slide-icon">ğŸŒŸ</div>
                            <h2>Congratulations!</h2>
                            <p>You've learned all about heat and temperature!</p>
                            <p>Remember: Heat is energy that moves from hot to cold, and it can change the form of materials!</p>
                            <p>Great job exploring the exciting world of heat and temperature! ğŸŒ¡ï¸</p>
                        `
                    }
                ]
            },
            water: {
                title: "Water Cycle",
                icon: "ğŸ’§",
                slides: [
                    {
                        type: "intro",
                        content: `
                            <div class="slide-icon">ğŸ’§</div>
                            <h2>Welcome to the Water Cycle!</h2>
                            <p>Get ready to follow water on its amazing journey around our planet!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒ</div>
                            <h3>What is the Water Cycle?</h3>
                            <p>The water cycle is water's never-ending journey around Earth! The same water goes round and round, changing from liquid to gas to solid.</p>
                            <p>Water moves between oceans, clouds, rain, rivers, and back to oceans again!</p>
                            <p>This cycle has been happening for millions of years!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">â˜€ï¸</div>
                            <h3>Step 1: Evaporation</h3>
                            <p>The sun heats up water in oceans, lakes, and rivers. This makes the water turn into invisible water vapor that rises into the sky!</p>
                            <p>It's like when you see steam coming from hot soup - the water becomes a gas!</p>
                            <p>Plants also release water vapor through their leaves - this is called transpiration.</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">â˜ï¸</div>
                            <h3>Step 2: Condensation</h3>
                            <p>High up in the sky, the air is much cooler. The water vapor gets cold and turns back into tiny water droplets!</p>
                            <p>Millions of these tiny droplets stick together to form clouds!</p>
                            <p>It's like when you breathe on a cold window and it fogs up!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒ§ï¸</div>
                            <h3>Step 3: Precipitation</h3>
                            <p>When clouds get heavy with water droplets, they fall back to Earth as precipitation!</p>
                            <p><strong>ğŸŒ§ï¸ Rain:</strong> Liquid water droplets fall when it's warm</p>
                            <p><strong>â„ï¸ Snow:</strong> Frozen water crystals fall when it's very cold</p>
                            <p><strong>ğŸ§Š Hail:</strong> Ice balls form in strong storms</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸ”ï¸</div>
                            <h3>Step 4: Collection</h3>
                            <p>When rain and snow fall to Earth, the water collects in different places:</p>
                            <p><strong>ğŸŒŠ Oceans and lakes:</strong> Water flows back to large bodies of water</p>
                            <p><strong>ğŸï¸ Rivers and streams:</strong> Water flows downhill toward the ocean</p>
                            <p><strong>ğŸŒ± Ground:</strong> Some water soaks into soil and feeds plants</p>
                            <p>Then the cycle starts all over again!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒ±</div>
                            <h3>Why is the Water Cycle Important?</h3>
                            <p>The water cycle is super important for all life on Earth!</p>
                            <p><strong>ğŸŒ¿ Plants:</strong> Need water to grow and make food</p>
                            <p><strong>ğŸ¾ Animals:</strong> Need fresh water to drink and survive</p>
                            <p><strong>ğŸ‘¥ People:</strong> Need clean water for drinking, cooking, and washing</p>
                            <p>Without the water cycle, there would be no life on our planet!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒˆ</div>
                            <h3>Water Cycle in Action</h3>
                            <p>You can see the water cycle happening all around you!</p>
                            <p><strong>ğŸŒ… Morning dew:</strong> Water vapor condensing on grass</p>
                            <p><strong>â˜ï¸ Cloud watching:</strong> Seeing condensed water vapor in the sky</p>
                            <p><strong>ğŸŒ§ï¸ Puddles:</strong> Collecting rainwater that will evaporate again</p>
                            <p>The water cycle never stops - it's always working!</p>
                        `
                    },
                    {
                        type: "fun-fact",
                        content: `
                            <div class="slide-icon">ğŸ’«</div>
                            <h3>Amazing Water Cycle Facts!</h3>
                            <div class="fun-fact-slide">
                                <strong>ğŸ’§ Did you know?</strong> The water you drink today might have been inside a dinosaur millions of years ago!
                            </div>
                            <div class="fun-fact-slide">
                                <strong>â˜ï¸ Cool fact:</strong> A single cloud can weigh as much as 100 elephants!
                            </div>
                        `
                    },
                    {
                        type: "quiz",
                        content: `
                            <div class="quiz-slide">
                                <h3>Test Your Knowledge!</h3>
                                <div class="quiz-question">What happens during evaporation?</div>
                                <div class="quiz-options">
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">Water falls from clouds</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, true)">Water turns into water vapor and rises</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">Water vapor turns into clouds</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">Water collects in rivers</button>
                                </div>
                                <div class="quiz-explanation">
                                    <strong>Correct!</strong> During evaporation, the sun heats water and turns it into water vapor that rises into the sky.
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "conclusion",
                        content: `
                            <div class="slide-icon">ğŸŒŸ</div>
                            <h2>Congratulations!</h2>
                            <p>You've followed water on its amazing journey through the water cycle!</p>
                            <p>Remember: Evaporation â†’ Condensation â†’ Precipitation â†’ Collection - and repeat!</p>
                            <p>Great job exploring the wonderful water cycle! ğŸ’§</p>
                        `
                    }
                ]
            },
            earth: {
                title: "Earth and Space",
                icon: "ğŸŒ",
                slides: [
                    {
                        type: "intro",
                        content: `
                            <div class="slide-icon">ğŸŒ</div>
                            <h2>Welcome to Earth and Space!</h2>
                            <p>Get ready to explore our amazing planet and the incredible universe beyond!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒ</div>
                            <h3>Our Planet Earth</h3>
                            <p>Earth is our home planet! It's the only planet we know of that has life.</p>
                            <p><strong>ğŸŒŠ Water:</strong> About 70% of Earth is covered with oceans</p>
                            <p><strong>ğŸŒ Land:</strong> Continents and islands make up the rest</p>
                            <p><strong>ğŸŒ¬ï¸ Atmosphere:</strong> A layer of air surrounds Earth and protects us</p>
                            <p>Earth is just the right distance from the sun - not too hot, not too cold!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒ…</div>
                            <h3>Day and Night</h3>
                            <p>Earth spins like a top! This spinning is called rotation, and it takes 24 hours for one complete spin.</p>
                            <p><strong>â˜€ï¸ Day:</strong> When your part of Earth faces the sun</p>
                            <p><strong>ğŸŒ™ Night:</strong> When your part of Earth faces away from the sun</p>
                            <p>As Earth spins, different parts get sunlight while other parts are in darkness!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸ‚</div>
                            <h3>The Seasons</h3>
                            <p>Earth travels around the sun in a big circle called an orbit. This journey takes one year!</p>
                            <p>Because Earth is tilted, different parts get more or less sunlight at different times:</p>
                            <p><strong>ğŸŒ¸ Spring:</strong> Plants start growing, weather gets warmer</p>
                            <p><strong>â˜€ï¸ Summer:</strong> Longest days, warmest weather</p>
                            <p><strong>ğŸ‚ Autumn:</strong> Leaves change color, cooler weather</p>
                            <p><strong>â„ï¸ Winter:</strong> Shortest days, coldest weather</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸŒ™</div>
                            <h3>The Moon</h3>
                            <p>The moon is Earth's companion! It travels around our planet and affects our oceans.</p>
                            <p><strong>ğŸŒŠ Tides:</strong> The moon's gravity pulls on our oceans, making them rise and fall</p>
                            <p><strong>ğŸŒ™ Phases:</strong> The moon seems to change shape as it orbits Earth</p>
                            <p><strong>ğŸŒš New moon â†’ ğŸŒ“ Quarter moon â†’ ğŸŒ• Full moon â†’ ğŸŒ— Quarter moon</strong></p>
                            <p>The moon has no air or water - astronauts need spacesuits to visit!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">â˜€ï¸</div>
                            <h3>The Sun</h3>
                            <p>The sun is a giant star that gives us light and heat! It's much, much bigger than Earth.</p>
                            <p><strong>ğŸ”¥ Very hot:</strong> The sun's surface is about 5,500Â°C!</p>
                            <p><strong>âš¡ Energy:</strong> The sun gives Earth the energy that powers weather and helps plants grow</p>
                            <p><strong>âš ï¸ Safety:</strong> Never look directly at the sun - it can hurt your eyes!</p>
                            <p>Without the sun, there would be no life on Earth!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸª</div>
                            <h3>Other Planets</h3>
                            <p>Earth is one of eight planets that orbit around the sun! Our solar system is like a cosmic family.</p>
                            <p><strong>ğŸ”´ Mars:</strong> The red planet - might have had water long ago</p>
                            <p><strong>ğŸª Saturn:</strong> Has beautiful rings made of ice and rock</p>
                            <p><strong>ğŸ”µ Neptune:</strong> Very cold and windy, far from the sun</p>
                            <p>Each planet is unique and special in its own way!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">â­</div>
                            <h3>Stars and Space</h3>
                            <p>Beyond our solar system, space is filled with billions of stars!</p>
                            <p><strong>â­ Stars:</strong> Giant balls of hot gas that shine with their own light</p>
                            <p><strong>ğŸŒŒ Galaxy:</strong> Our sun and stars belong to the Milky Way galaxy</p>
                            <p><strong>ğŸš€ Space exploration:</strong> People have sent rockets and astronauts to explore space</p>
                            <p>Space is so big that it would take millions of years to travel to the nearest star!</p>
                        `
                    },
                    {
                        type: "fun-fact",
                        content: `
                            <div class="slide-icon">ğŸŒ </div>
                            <h3>Amazing Space Facts!</h3>
                            <div class="fun-fact-slide">
                                <strong>ğŸŒ Did you know?</strong> If you could drive a car to the moon, it would take about 6 months of non-stop driving!
                            </div>
                            <div class="fun-fact-slide">
                                <strong>â­ Cool fact:</strong> The light from some stars takes so long to reach us that the star might not exist anymore!
                            </div>
                        `
                    },
                    {
                        type: "quiz",
                        content: `
                            <div class="quiz-slide">
                                <h3>Test Your Knowledge!</h3>
                                <div class="quiz-question">What causes day and night on Earth?</div>
                                <div class="quiz-options">
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">The moon moving around Earth</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, true)">Earth spinning on its axis</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">The sun moving around Earth</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">Clouds blocking the sun</button>
                                </div>
                                <div class="quiz-explanation">
                                    <strong>Correct!</strong> Earth spins on its axis every 24 hours, causing different parts to face toward or away from the sun.
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "conclusion",
                        content: `
                            <div class="slide-icon">ğŸŒŸ</div>
                            <h2>Congratulations!</h2>
                            <p>You've explored Earth and the amazing universe around us!</p>
                            <p>Remember: Earth spins to make day and night, orbits to make seasons, and is part of a huge solar system!</p>
                            <p>Great job exploring Earth and space! ğŸš€</p>
                        `
                    }
                ]
            },
            machines: {
                title: "Simple Machines",
                icon: "âš¡",
                slides: [
                    {
                        type: "intro",
                        content: `
                            <div class="slide-icon">âš¡</div>
                            <h2>Welcome to Simple Machines!</h2>
                            <p>Get ready to discover amazing tools that make work easier and help us do incredible things!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸ”§</div>
                            <h3>What Are Simple Machines?</h3>
                            <p>Simple machines are basic tools that help us do work more easily! They make hard jobs easier by changing the way force is applied.</p>
                            <p>People have been using simple machines for thousands of years!</p>
                            <p>There are six main types of simple machines, and they're all around us every day!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸ“</div>
                            <h3>The Lever</h3>
                            <p>A lever is a bar that moves around a point called a fulcrum!</p>
                            <p><strong>ğŸª Seesaw:</strong> You push down on one side to lift the other side</p>
                            <p><strong>ğŸ”¨ Hammer:</strong> Helps pull out nails with less effort</p>
                            <p><strong>âœ‚ï¸ Scissors:</strong> Two levers working together to cut things</p>
                            <p>Levers help us lift heavy things or apply more force!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸ“</div>
                            <h3>The Inclined Plane</h3>
                            <p>An inclined plane is just a fancy name for a ramp or slope!</p>
                            <p><strong>ğŸ›¤ï¸ Ramps:</strong> Make it easier to move heavy things up high</p>
                            <p><strong>ğŸ”º Slides:</strong> Help you go down smoothly and safely</p>
                            <p><strong>ğŸ  Wheelchair ramps:</strong> Help people get into buildings easily</p>
                            <p>It's easier to push something up a ramp than to lift it straight up!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸ”©</div>
                            <h3>The Wedge</h3>
                            <p>A wedge is like two inclined planes put together! It's used to split things apart or hold them together.</p>
                            <p><strong>ğŸª“ Axe:</strong> Splits wood with its sharp wedge shape</p>
                            <p><strong>ğŸ”ª Knife:</strong> Cuts through food easily</p>
                            <p><strong>ğŸ“Œ Nail:</strong> Its pointed end wedges into wood</p>
                            <p>Wedges concentrate force into a small area to make cutting easier!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸ”©</div>
                            <h3>The Screw</h3>
                            <p>A screw is an inclined plane wrapped around a cylinder! It helps hold things together.</p>
                            <p>Screws trade distance for force - you turn many times to get strong holding power!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <p><strong>ğŸšª Doorknob:</strong> The round handle turns the axle inside</p>
                            <p><strong>ğŸ¡ Ferris wheel:</strong> A giant wheel that carries people around</p>
                            <p>Wheels reduce friction and make it much easier to move heavy things!</p>
                        `
                    },
                    {
                        type: "content",
                        content: `
                            <div class="slide-icon">ğŸª¢</div>
                            <h3>The Pulley</h3>
                            <p>A pulley is a wheel with a rope or chain that goes around it! It helps lift heavy things.</p>
                            <p><strong>ğŸ—ï¸ Construction cranes:</strong> Lift heavy building materials high up</p>
                            <p><strong>ğŸ´â€â˜ ï¸ Flag poles:</strong> Raise and lower flags easily</p>
                            <p><strong>â›µ Ships:</strong> Use pulleys to adjust their sails</p>
                            <p>Pulleys can change the direction of force or make lifting easier!</p>
                        `
                    },
                    {
                        type: "fun-fact",
                        content: `
                            <div class="slide-icon">ğŸ—ï¸</div>
                            <h3>Amazing Machine Facts!</h3>
                            <div class="fun-fact-slide">
                                <strong>ğŸº Did you know?</strong> The ancient Egyptians used simple machines like ramps and levers to build the giant pyramids!
                            </div>
                            <div class="fun-fact-slide">
                                <strong>âš™ï¸ Cool fact:</strong> Your body is full of simple machines - your arm is a lever and your teeth are wedges!
                            </div>
                        `
                    },
                    {
                        type: "quiz",
                        content: `
                            <div class="quiz-slide">
                                <h3>Test Your Knowledge!</h3>
                                <div class="quiz-question">Which simple machine would be best for lifting a heavy box to a high shelf?</div>
                                <div class="quiz-options">
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, true)">Pulley</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">Screw</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">Wheel and Axle</button>
                                    <button class="quiz-option" onclick="selectQuizAnswer(this, false)">Wedge</button>
                                </div>
                                <div class="quiz-explanation">
                                    <strong>Correct!</strong> A pulley uses a rope and wheel to help lift heavy objects up to high places with less effort.
                                </div>
                            </div>
                        `
                    },
                    {
                        type: "conclusion",
                        content: `
                            <div class="slide-icon">ğŸŒŸ</div>
                            <h2>Congratulations!</h2>
                            <p>You've learned all about simple machines and how they make work easier!</p>
                            <p>Remember: Lever, Inclined Plane, Wedge, Screw, Wheel & Axle, and Pulley - they're everywhere!</p>
                            <p>Great job exploring the world of simple machines! âš¡</p>
                        `
                    }
                ]
            }
        };

        // Functions for modal and slide management
        function openSlideModal(topic) {
    currentTopic = topic;
    currentSlideIndex = 0;

    document.getElementById('slide-modal').style.display = 'flex';
    document.body.style.overflow = 'hidden';
    document.getElementById('slide-icon').textContent = slideContent[topic].icon;
    document.getElementById('slide-title-text').textContent = slideContent[topic].title;

    loadSlide();
    updateSlideProgress();
}


        function closeSlideModal() {
            const modal = document.getElementById('slide-modal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function loadSlide() {
            const slideContentEl = document.getElementById('slide-content');
            const slides = slideContent[currentTopic].slides;
            slideContentEl.innerHTML = '';
            const slideEl = document.createElement('div');
            slideEl.className = 'slide active';
            slideEl.innerHTML = slides[currentSlideIndex].content;
            slideContentEl.appendChild(slideEl);
            updateSlideCounter();
            updateNavigationButtons();
        }

        function updateSlideCounter() {
            const counter = document.getElementById('slide-counter');
            const totalSlides = slideContent[currentTopic].slides.length;
            counter.textContent = `${currentSlideIndex + 1} / ${totalSlides}`;
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-slide-btn');
            const nextBtn = document.getElementById('next-slide-btn');
            const totalSlides = slideContent[currentTopic].slides.length;
            prevBtn.disabled = currentSlideIndex === 0;
            nextBtn.disabled = false;
            if (currentSlideIndex === totalSlides - 1) {
                nextBtn.textContent = 'Complete!';
            } else {
                nextBtn.textContent = 'Next â†’';
            }
        }

        function updateSlideProgress() {
            const progressEl = document.getElementById('slide-progress');
            const totalSlides = slideContent[currentTopic].slides.length;
            progressEl.innerHTML = '';
            for (let i = 0; i < totalSlides; i++) {
                const dot = document.createElement('div');
                dot.className = `progress-dot ${i === currentSlideIndex ? 'active' : ''}`;
                progressEl.appendChild(dot);
            }
        }

        function nextSlide() {
            const totalSlides = slideContent[currentTopic].slides.length;
            if (currentSlideIndex < totalSlides - 1) {
                currentSlideIndex++;
                loadSlide();
                updateSlideProgress();
            } else {
                completeSlide();
            }
        }

        function previousSlide() {
            if (currentSlideIndex > 0) {
                currentSlideIndex--;
                loadSlide();
                updateSlideProgress();
            }
        }

        function completeSlide() {
            totalPoints += 100;
            completedTopics++;
            updateDashboard();
            closeSlideModal();
            fetch('/update_learning_progress', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ topic: currentTopic })
            });
            alert(`ğŸ‰ Congratulations! You've completed ${slideContent[currentTopic].title} and earned 100 points!`);
        }

        function selectQuizAnswer(button, isCorrect) {
            const options = button.parentElement.querySelectorAll('.quiz-option');
            const explanation = button.parentElement.nextElementSibling;
            options.forEach(option => {
                option.disabled = true;
                option.style.pointerEvents = 'none';
            });
            button.classList.add('selected');
            if (isCorrect) {
                button.classList.add('correct');
                totalPoints += 10;
            } else {
                button.classList.add('incorrect');
                options.forEach(option => {
                    if (option.onclick.toString().includes('true')) {
                        option.classList.add('correct');
                    }
                });
            }
            explanation.classList.add('show');
            updateDashboard();
        }

        function updateDashboard() {
            document.getElementById('points-display').textContent = `${totalPoints} Points`;
            document.getElementById('topics-display').textContent = `${completedTopics}/6 Topics`;
            const percent = Math.round((completedTopics / 6) * 100);
            document.getElementById('progress-percentage').textContent = `${percent}%`;
            document.getElementById('overall-progress').style.width = `${percent}%`;
        }

        // Keyboard navigation (should only be registered once)
        document.addEventListener('keydown', function(e) {
            const modal = document.getElementById('slide-modal');
            if (modal && modal.style.display === 'flex') {
                if (e.key === 'ArrowLeft') {
                    previousSlide();
                } else if (e.key === 'ArrowRight') {
                    nextSlide();
                } else if (e.key === 'Escape') {
                    closeSlideModal();
                }
            }
        });
    </script>
</body>
</html>
